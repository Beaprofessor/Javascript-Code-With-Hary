<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice Set - 9</title>
</head>

<body>


    <script>
        // Problem - 1
        // const loadScript = async (src) => {
        //     return new Promise((resolve, reject) => {
        //         let script = document.createElement("script")
        //         script.src = src
        //         script.onload = () => {
        //             resolve(src + " Done Success")
        //         }
        //         document.head.append(script)
        //     })
        // }
        // let a =  loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
        // a.then((value)=>{
        //     console.log(value)
        // })

        // Problem -2
        // const main1 = async () => {
        //     console.log(new Date().getMilliseconds())
        //     let a = await loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
        //     console.log(a)
        //     console.log(new Date().getMilliseconds())
        // }

        // main1()



        // Problem - 3

        // let hero = () => {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             reject(new Error("Please this is not acceptable"))
        //         }, 3000)
        //     })
        // }
        // let b = async () => {
        //     try {
        //         let c = await hero()
        //         console.log(c)
        //     }
        //     catch (err) {
        //         console.log("This error has been handled")
        //     }
        // }
        // b()



        // Problem - 4
        let a1 = async () => {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(10)
                }, 2000)
            })

        }
        let a2 = async () => {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(20)
                }, 1000)
            })

        }
        let a3 = async () => {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(30)
                }, 3000)
            })

        }

        const run = async () => {
            console.time("run")
            // let b1 = await a1() // fetch first 10 products from the database
            // let b2 = await a2() // fetch another 10 products from the database
            // let b3 = await a3() // fetch yet another 10 products from the database


            let b1 =  a1() // fetch first 10 products from the database
            let b2 =  a2() // fetch another 10 products from the database
            let b3 =  a3() // fetch yet another 10 products from the database

            let b1b2b3 = await Promise.all([b1, b2, b3])
            console.log(b1b2b3)
            console.log(b1, b2, b3)
            console.timeEnd("run")

        }

        run()
    </script>
</body>

</html>